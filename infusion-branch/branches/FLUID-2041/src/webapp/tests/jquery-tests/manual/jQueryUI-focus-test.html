<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <script type="text/javascript" src="../../../fluid-components/js/jquery/jquery-1.2.6.js"></script>
    <script type="text/javascript" src="../../../fluid-components/js/jquery/ui.core.js"></script>
    <script type="text/javascript" src="../../../fluid-components/js/jquery/ui.draggable.js"></script>
    
    <title>JQuery UI focus test</title>
</head>

<body>
This is a simple test case showing interaction of JQuery UI Core event handlers
(in particular mouseDown) with default semantics, in particular focus/blur.
<br/><br/>
<div class="mouseDown-container">
  <input class="target" type="text" value="A text control to receive initial focus" size="50"/>
  <br/>
  This is some text within the container.
  As the document starts up, the container is in the "natural" state with no
  special handlers registered. Demonstrate that focus and blur for these elements is
  working by clicking on the input field above, and then click on this text, and back again.
  <br/><br/>
  Then click on the button below, which registers a "mouseDown" handler on the the
  overall container (for convenience, by making it "draggable"). 
  Try clicking on the input field and this text a few more times - 
  the status messages indicating focus and blur will not appear. However, it *is* still
  possible to blur the text field element by clicking outside the container entirely,
  that is, on the document below or the status text.
</div>

<input class="button" type="button" value="register mouseDown"/>
<div class="status">
</div>
<script type="text/javascript">
function log(message) {
  $("div.status").append($("<span>"+message+"</span>")).append($("<br/>"));
}

$("input.target").focus();
$("input.target").focus(function() { log("Received focus");});
$("input.target").blur(function() { log("Received blur");});

var registered = false;
$("input.button").click(function() {
  if (!registered) {
    $("div.mouseDown-container").draggable();
    }
  else {
    $("div.mouseDown-container").draggable("destroy");
    }
  $("input.target").focus();
  $("div.status")[0].innerHTML = "";
  registered = !registered;
  $("input.button").val(registered? "deregister mouseDown": "register mouseDown");
});
</script>
</body>
</html>